<!--
  ~ Copyright (c)  2016-2020 https://www.thecoderscorner.com (Nutricherry LTD).
  ~ This product is licensed under an Apache license, see the LICENSE file in the top-level directory.
  ~
  -->

<TcMenuPlugin name="Ethernet control of your menu using mbed libraries" id="27e7a502-330e-4570-9f8e-bd26ac88051f" subsystem="REMOTE"
              xmlns="https://www.thecoderscorner.com/libraries/tcmenuPluginItem" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="https://www.thecoderscorner.com/libraries/tcmenuPluginItem https://www.thecoderscorner.com/libraries/tcmenu-plugin-item.xsd">
    <SupportedPlatforms>
        <Platform>MBED_RTOS</Platform>
    </SupportedPlatforms>
    <Description>Use this option to be able to control the menu using the mbed ethernet libraries.</Description>
    <Documentation link="https://www.thecoderscorner.com/products/arduino-libraries/tc-menu/tcmenu-plugins/ethernet-remote-plugin/"/>
    <RequiredLibraries/>
    <ImageFile>mbed-ethernet.jpg</ImageFile>

    <Properties>
        <Property id="NUM_CONCURRENT_ETH" name="Number of concurrent connections" desc="The number of concurrent connects to allow, each uses memory" initial="1" type="choice">
            <Choices>
                <Choice desc="One concurrent remote">1</Choice>
                <Choice desc="Two concurrent remotes">2</Choice>
                <Choice desc="Three concurrent remotes">3</Choice>
            </Choices>
        </Property>
        <Property id="LISTEN_PORT" name="Port on which to listen" initial="3333" desc="The port on which to listen" type="int" min="0" max="65535"/>
    </Properties>

    <ApplicabilityDefs/>

    <SourceFiles>
        <SourceFile name="mbedEthernet/MBedEthernetTransport.cpp"/>
        <SourceFile name="mbedEthernet/MBedEthernetTransport.h"/>
    </SourceFiles>

    <IncludeFiles>
        <Header name="MBedEthernetTransport.h" inSource="true"/>
        <Header name="RemoteConnector.h" inSource="false"/>
    </IncludeFiles>

    <GlobalVariables>
        <Variable name="mbedEthInitialisation" type="MbedEthernetInitialisation" export="true">
            <Param value="${LISTEN_PORT}"/>
            <Param value="applicationInfo"/>
        </Variable>

        <Variable name="ethernetTransport" type="EthernetTagValTransport" export="false"/>
        <Variable name="ethernetConnection" type="RemoteServerConnection" export="false">
            <Param value="ethernetTransport"/>
            <Param value="mbedEthInitialisation"/>
        </Variable>

        <Variable name="ethernetTransport2" type="EthernetTagValTransport" export="false" whenProperty="NUM_CONCURRENT_ETH" matches="[23]"/>
        <Variable name="ethernetConnection2" type="RemoteServerConnection" export="false" whenProperty="NUM_CONCURRENT_ETH" matches="[23]">
            <Param value="ethernetTransport2"/>
            <Param value="mbedEthInitialisation"/>
        </Variable>

        <Variable name="ethernetTransport3" type="EthernetTagValTransport" export="false" whenProperty="NUM_CONCURRENT_ETH" isValue="3"/>
        <Variable name="ethernetConnection3" type="RemoteServerConnection" export="false" whenProperty="NUM_CONCURRENT_ETH" isValue="3">
            <Param value="ethernetTransport3"/>
            <Param value="mbedEthInitialisation"/>
        </Variable>

    </GlobalVariables>

    <SetupFunctions>

    </SetupFunctions>
</TcMenuPlugin>