(this.webpackJsonpembedcontrol=this.webpackJsonpembedcontrol||[]).push([[0],{20:function(e,t,n){},21:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var i,a=n(6),s=n.n(a),r=n(14),o=n.n(r),c=(n(20),n(1)),u=n(2),l=n(7),h=n(3),d=n(4),E=n.p+"static/media/large_icon.5be57cbe.webp",g=(n(21),n(10)),O=n.n(g),f=n(12);!function(e){e.KEY_NAME_FIELD="NM",e.KEY_UUID_FIELD="UU",e.KEY_VER_FIELD="VE",e.HB_FREQUENCY_FIELD="HI",e.HB_MODE_FIELD="HR",e.KEY_PLATFORM_ID="PF",e.KEY_BOOT_TYPE_FIELD="BT",e.KEY_ID_FIELD="ID",e.KEY_CORRELATION_FIELD="IC",e.KEY_EEPROM_FIELD="IE",e.KEY_READONLY_FIELD="RO",e.KEY_VISIBLE_FIELD="VI",e.KEY_ALPHA_FIELD="RA",e.KEY_WIDTH_FIELD="WI",e.KEY_PARENT_ID_FIELD="PI",e.KEY_ANALOG_MAX_FIELD="AM",e.KEY_ANALOG_OFFSET_FIELD="AO",e.KEY_ANALOG_DIVISOR_FIELD="AD",e.KEY_ANALOG_UNIT_FIELD="AU",e.KEY_FLOAT_DECIMAL_PLACES="FD",e.KEY_NEGATIVE_ALLOWED="NA",e.KEY_REMOTE_NUM="RN",e.KEY_CURRENT_VAL="VC",e.KEY_BOOLEAN_NAMING="BN",e.KEY_NO_OF_CHOICES="NC",e.KEY_MAX_LENGTH="ML",e.KEY_EDIT_TYPE="EM",e.KEY_PREPEND_CHOICE="C",e.KEY_PREPEND_NAMECHOICE="c",e.KEY_CHANGE_TYPE="TC",e.KEY_ACK_STATUS="ST",e.KEY_MODE_FIELD="MO",e.KEY_BUFFER_FIELD="BU",e.KEY_HEADER_FIELD="HF",e.KEY_BUTTON1_FIELD="B1",e.KEY_BUTTON2_FIELD="B2"}(i||(i={}));var p,T,_,m,v,I,b,A=function e(){Object(c.a)(this,e)};A.JOIN="NJ",A.PAIRING_REQUEST="PR",A.HEARTBEAT="HB",A.BOOTSTRAP="BS",A.ANALOG_BOOT_ITEM="BA",A.ACTION_BOOT_ITEM="BC",A.SUBMENU_BOOT_ITEM="BM",A.ENUM_BOOT_ITEM="BE",A.BOOLEAN_BOOT_ITEM="BB",A.TEXT_BOOT_ITEM="BT",A.RUNTIME_LIST_BOOT="BL",A.BOOT_SCROLL_CHOICE="BZ",A.BOOT_RGB_COLOR="BK",A.LARGE_NUM_BOOT_ITEM="BN",A.FLOAT_BOOT_ITEM="BF",A.REMOTE_BOOT_ITEM="BR",A.ACKNOWLEDGEMENT="AK",A.CHANGE_INT_FIELD="VC",A.DIALOG_UPDATE="DM",function(e){e[e.NORMAL=0]="NORMAL",e[e.START=1]="START",e[e.END=2]="END"}(p||(p={})),function(e){e[e.START=0]="START",e[e.STOP=1]="STOP"}(T||(T={})),function(e){e[e.DELTA=0]="DELTA",e[e.ABSOLUTE=1]="ABSOLUTE",e[e.ABSOLUTE_LIST=2]="ABSOLUTE_LIST",e[e.LIST_SELECTION=3]="LIST_SELECTION"}(_||(_={})),function(e){e[e.OK=0]="OK",e[e.ACCEPT=1]="ACCEPT",e[e.CANCEL=2]="CANCEL",e[e.CLOSE=3]="CLOSE",e[e.NONE=4]="NONE"}(m||(m={})),function(e){e.SHOW="S",e.HIDE="H",e.ACTION="A"}(v||(v={})),function(e){e[e.ARDUINO=0]="ARDUINO",e[e.ARDUINO_32=2]="ARDUINO_32",e[e.JAVA_API=1]="JAVA_API",e[e.DNET_API=3]="DNET_API",e[e.JS_API=4]="JS_API"}(I||(I={})),function(e){e[e.VALUE_OUT_OF_RANGE=-1]="VALUE_OUT_OF_RANGE",e[e.SUCCESS=0]="SUCCESS",e[e.ID_NOT_FOUND=1]="ID_NOT_FOUND",e[e.INVALID_CREDENTIALS=2]="INVALID_CREDENTIALS",e[e.UNSPECIFIED_ERROR=1e4]="UNSPECIFIED_ERROR"}(b||(b={}));var N,C=n(15),D=function(){function e(t){Object(c.a)(this,e),this.messageType="Undefined",this.itemName="",this.menuId="",this.readOnly=!1,this.visible=!1,this.changed=!1,this.currentValue=void 0,this.currentValue=t}return Object(u.a)(e,[{key:"isReadOnly",value:function(){return this.readOnly}},{key:"setReadOnly",value:function(e){this.readOnly=e,this.markChanged()}},{key:"isVisible",value:function(){return this.visible}},{key:"setVisible",value:function(e){this.visible=e,this.markChanged()}},{key:"getItemName",value:function(){return this.itemName}},{key:"setItemName",value:function(e){this.itemName=e,this.markChanged()}},{key:"getMenuId",value:function(){return this.menuId}},{key:"setMenuId",value:function(e){this.menuId=e,this.markChanged()}},{key:"markChanged",value:function(){this.changed=!0}},{key:"clearChanged",value:function(){this.changed=!1}},{key:"isChanged",value:function(){return this.changed}},{key:"getCurrentValue",value:function(){return this.currentValue}},{key:"setCurrentValue",value:function(e){this.currentValue=e,this.markChanged()}}]),e}(),j=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,0)).messageType="Analog",i.maxValue=0,i.divisor=0,i.offset=0,i.unitName="",i.setMenuId(e),i}return Object(u.a)(n,[{key:"getMaxValue",value:function(){return this.maxValue}},{key:"setMaxValue",value:function(e){this.maxValue=e,this.markChanged()}},{key:"getDivisor",value:function(){return this.divisor}},{key:"setDivisor",value:function(e){this.divisor=e,this.markChanged()}},{key:"getOffset",value:function(){return this.offset}},{key:"setOffset",value:function(e){this.offset=e,this.markChanged()}},{key:"getUnitName",value:function(){return this.unitName}},{key:"setUnitName",value:function(e){this.unitName=e,this.markChanged()}}]),n}(D),y=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,0)).messageType="Enum",i.itemList=[],i.setMenuId(e),i}return Object(u.a)(n,[{key:"getItemList",value:function(){return this.itemList}},{key:"setItemList",value:function(e){this.itemList=e,this.markChanged()}}]),n}(D),k=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,[])).messageType="List",i.numberOfItems=0,i.setMenuId(e),i}return Object(u.a)(n,[{key:"setNumberOfItems",value:function(e){this.numberOfItems=e,this.markChanged()}},{key:"getNumberOfItems",value:function(){return this.numberOfItems}}]),n}(D);!function(e){e[e.TRUE_FALSE=0]="TRUE_FALSE",e[e.ON_OFF=1]="ON_OFF",e[e.YES_NO=2]="YES_NO"}(N||(N={}));var S,M=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,!1)).messageType="Boolean",i.naming=N.TRUE_FALSE,i.setMenuId(e),i}return Object(u.a)(n,[{key:"getNaming",value:function(){return this.naming}},{key:"setNaming",value:function(e){this.naming=e,this.markChanged()}}]),n}(D),L=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,0)).messageType="Float",i.decimalPlaces=1,i.setMenuId(e),i}return Object(u.a)(n,[{key:"getDecimalPlaces",value:function(){return this.decimalPlaces}},{key:"setDecimalPlaces",value:function(e){this.decimalPlaces=e,this.markChanged()}}]),n}(D),R=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,!1)).messageType="Action",i.setMenuId(e),i}return n}(D),P=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e,i){var a;return Object(c.a)(this,n),(a=t.call(this,!1)).messageType="Sub",a.children=[],a.setItemName(e),a.setMenuId(i),a.setReadOnly(!1),a.setVisible(!0),a.clearChanged(),a}return Object(u.a)(n,[{key:"getChildren",value:function(){return this.children}},{key:"addChildItem",value:function(e){this.children.push(e),this.markChanged()}},{key:"clearAll",value:function(){this.children=[],this.markChanged()}}]),n}(D),U=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,0)).messageType="LargeNum",i.digitsAllowed=8,i.decimalPlaces=3,i.negativeAllowed=!1,i.setMenuId(e),i}return Object(u.a)(n,[{key:"getDigitsAllowed",value:function(){return this.digitsAllowed}},{key:"setDigitsAllowed",value:function(e){this.digitsAllowed=e,this.markChanged()}},{key:"getDecimalPlaces",value:function(){return this.decimalPlaces}},{key:"setDecimalPlaces",value:function(e){this.decimalPlaces=e,this.markChanged()}},{key:"isNegativeAllowed",value:function(){return this.negativeAllowed}},{key:"setNegativeAllowed",value:function(e){this.negativeAllowed=e,this.markChanged()}}]),n}(D),V=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,"#ffffff")).messageType="Rgb32",i.alphaChannelOn=!1,i.setMenuId(e),i}return Object(u.a)(n,[{key:"isAlphaChannelOn",value:function(){return this.alphaChannelOn}},{key:"setAlphaChannelOn",value:function(e){this.alphaChannelOn=e,this.markChanged()}}]),n}(D),F=function(){function e(t,n){Object(c.a)(this,e),this.currentPos=0,this.currentValue="",this.currentPos=t,this.currentValue=n}return Object(u.a)(e,[{key:"asString",value:function(){return this.currentPos+"-"+this.currentValue}}],[{key:"fromString",value:function(t){var n=null===t||void 0===t?void 0:t.split(":");return 2===(null===n||void 0===n?void 0:n.length)?new e(parseInt(n[0]),n[1]):new e(0,"")}}]),e}(),x=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,new F(0,""))).messageType="Scroll",i.numberOfEntries=0,i.setMenuId(e),i}return Object(u.a)(n,[{key:"setNumberOfEntries",value:function(e){this.numberOfEntries=e,this.markChanged()}},{key:"getNumberOfEntries",value:function(){return this.numberOfEntries}}]),n}(D);!function(e){e[e.PLAIN_TEXT=0]="PLAIN_TEXT",e[e.IP_ADDRESS=1]="IP_ADDRESS",e[e.TIME_24H=2]="TIME_24H",e[e.TIME_12H=3]="TIME_12H",e[e.TIME_24_HUNDREDS=4]="TIME_24_HUNDREDS",e[e.GREGORIAN_DATE=5]="GREGORIAN_DATE",e[e.TIME_DURATION_SECONDS=6]="TIME_DURATION_SECONDS",e[e.TIME_DURATION_HUNDREDS=7]="TIME_DURATION_HUNDREDS",e[e.TIME_24H_HHMM=8]="TIME_24H_HHMM",e[e.TIME_12H_HHMM=9]="TIME_12H_HHMM"}(S||(S={}));var w=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,"")).messageType="Text",i.editMode=S.PLAIN_TEXT,i.textLength=10,i.setMenuId(e),i}return Object(u.a)(n,[{key:"getTextLength",value:function(){return this.textLength}},{key:"setTextLength",value:function(e){this.textLength=e,this.markChanged()}},{key:"getEditMode",value:function(){return this.editMode}},{key:"setEditMode",value:function(e){this.editMode=e,this.markChanged()}}]),n}(D),H=function(){function e(t){Object(c.a)(this,e),this._commandType=void 0,this._commandType=t}return Object(u.a)(e,[{key:"commandType",get:function(){return this._commandType}}]),e}(),B=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e,i){var a;return Object(c.a)(this,n),(a=t.call(this,A.HEARTBEAT))._frequency=void 0,a._mode=void 0,a._frequency=e,a._mode=i,a}return Object(u.a)(n,[{key:"frequency",get:function(){return this._frequency}},{key:"mode",get:function(){return this._mode}}]),n}(H),Y=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,A.BOOTSTRAP))._bootstrapMode=void 0,i._bootstrapMode=e,i}return Object(u.a)(n,[{key:"bootstrapMode",get:function(){return this._bootstrapMode}}]),n}(H),K=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e,i){var a;return Object(c.a)(this,n),(a=t.call(this,A.ACKNOWLEDGEMENT))._status=void 0,a._correlation=void 0,a._status=e,a._correlation=i,a}return Object(u.a)(n,[{key:"status",get:function(){return this._status}},{key:"correlation",get:function(){return this._correlation}}]),n}(H),G=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e,i,a,s,r,o){var u;return Object(c.a)(this,n),(u=t.call(this,A.DIALOG_UPDATE))._mode=void 0,u._header=void 0,u._buffer=void 0,u._button1=void 0,u._button2=void 0,u._correlation=void 0,u._mode=e,u._header=i,u._buffer=a,u._button1=s,u._button2=r,u._correlation=o,u}return Object(u.a)(n,[{key:"mode",get:function(){return this._mode}},{key:"correlation",get:function(){return this._correlation}},{key:"header",get:function(){return this._header}},{key:"buffer",get:function(){return this._buffer}},{key:"button1",get:function(){return this._button1}},{key:"button2",get:function(){return this._button2}}]),n}(H),W=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e,i,a,s){var r;return Object(c.a)(this,n),(r=t.call(this,A.JOIN))._name=void 0,r._uuid=void 0,r._platform=void 0,r._version=void 0,r._name=e,r._uuid=i,r._platform=a,r._version=s,r}return Object(u.a)(n,[{key:"name",get:function(){return this._name}},{key:"uuid",get:function(){return this._uuid}},{key:"platform",get:function(){return this._platform}},{key:"version",get:function(){return this._version}}]),n}(H),J=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e,i,a,s){var r;return Object(c.a)(this,n),(r=t.call(this,A.CHANGE_INT_FIELD))._menuId=void 0,r._mode=void 0,r._value=void 0,r._correlation=void 0,r._menuId=e,r._mode=i,r._value=a,r._correlation=s,r}return Object(u.a)(n,[{key:"menuId",get:function(){return this._menuId}},{key:"mode",get:function(){return this._mode}},{key:"value",get:function(){return this._value}},{key:"correlation",get:function(){return this._correlation}}]),n}(H),q=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e,i){var a;return Object(c.a)(this,n),(a=t.call(this,A.PAIRING_REQUEST))._appName=void 0,a._appUuid=void 0,a._appName=e,a._appUuid=i,a}return Object(u.a)(n,[{key:"appName",get:function(){return this._appName}},{key:"appUuid",get:function(){return this._appUuid}}]),n}(H),X=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e,i,a,s){var r;return Object(c.a)(this,n),(r=t.call(this,e))._item=void 0,r._parentId=void 0,r._value=void 0,r._item=i,r._parentId=a,r._value=s,r}return Object(u.a)(n,[{key:"item",get:function(){return this._item}},{key:"parentId",get:function(){return this._parentId}},{key:"value",get:function(){return this._value}}]),n}(H),Q=function(){function e(t,n){Object(c.a)(this,e),this.expectedMsgType=void 0,this.msgHandler=void 0,this.expectedMsgType=t,this.msgHandler=n}return Object(u.a)(e,[{key:"applyMsg",value:function(e){if(e.commandType===this.expectedMsgType)return this.msgHandler(e);throw new z("Unexpected message type "+e.commandType+" when expecting "+this.expectedMsgType)}}]),e}(),z=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var i;Object(c.a)(this,n),(i=t.call(this,e)).message=e,i.name="TcProtocolError";var a=new Error;return i.stack=a.stack,i}return n}(Object(C.a)(Error));z.UNEXPECTED_EOM="Unexpected End Of Message",z.KEY_NOT_DEF="Key not defined: ",z.MSG_TOO_SMALL="Message too small: ";var Z=function(){function e(){Object(c.a)(this,e),this.keyToValueMap={},this.parseData="",this.position=0}return Object(u.a)(e,[{key:"startParseData",value:function(e){this.position=0,this.keyToValueMap={},this.parseData=e;for(var t=!1;this.position<this.parseData.length&&!t&&2!==this.parseData.charCodeAt(this.position);){var n=this.readString();if(!n)throw new z(z.UNEXPECTED_EOM);var i=this.readString();i||2!==i.charCodeAt(0)||(t=!0),this.keyToValueMap[n]=i}}},{key:"readString",value:function(){for(var e="";this.position<this.parseData.length;){var t=this.parseData.charAt(this.position++);if("\\"===t)e+=t=this.parseData.charAt(this.position++);else{if("="===t||"|"===t)return e;e+=t}}return e}},{key:"getValue",value:function(e){var t=this.keyToValueMap[e];if(!t)throw new z(z.KEY_NOT_DEF+e);return t}},{key:"getValueAsInt",value:function(e){return parseInt(this.getValue(e))}},{key:"getValueWithDefault",value:function(e,t){var n=this.keyToValueMap[e];return null!==n&&void 0!==n?n:t}},{key:"getValueAsIntWithDefault",value:function(e,t){var n=this.keyToValueMap[e];return n?parseInt(n):t}}]),e}(),$=function(){function e(t){Object(c.a)(this,e),this.parsedKeyVal=void 0,this.tree=void 0,this.incomingTagValMsgProcessors={},this.outgoingTagValMsgProcessors={},this.parsedKeyVal=new Z,this.tree=t,this.initialiseProtocol()}return Object(u.a)(e,[{key:"addIncomingTagValHandler",value:function(e,t){this.incomingTagValMsgProcessors[e]=t}},{key:"addOutgoingTagValHandler",value:function(e,t){this.outgoingTagValMsgProcessors[e]=t}},{key:"initialiseProtocol",value:function(){var e=this;this.incomingTagValMsgProcessors[A.HEARTBEAT]=function(e){return new B(e.getValueAsIntWithDefault(i.HB_FREQUENCY_FIELD,1500),e.getValueAsInt(i.HB_MODE_FIELD))},this.incomingTagValMsgProcessors[A.BOOTSTRAP]=function(e){return new Y("START"===e.getValue(i.KEY_BOOT_TYPE_FIELD)?T.START:T.STOP)},this.incomingTagValMsgProcessors[A.ACKNOWLEDGEMENT]=function(e){return new K(e.getValueAsInt(i.KEY_ACK_STATUS),e.getValue(i.KEY_CORRELATION_FIELD))},this.incomingTagValMsgProcessors[A.DIALOG_UPDATE]=function(e){return new G("S"===(t=e.getValue(i.KEY_MODE_FIELD))?v.SHOW:"H"===t?v.HIDE:v.ACTION,e.getValueWithDefault(i.KEY_HEADER_FIELD,""),e.getValueWithDefault(i.KEY_BUFFER_FIELD,""),e.getValueAsIntWithDefault(i.KEY_BUTTON1_FIELD,0),e.getValueAsIntWithDefault(i.KEY_BUTTON2_FIELD,0),e.getValueWithDefault(i.KEY_CORRELATION_FIELD,"0"));var t},this.incomingTagValMsgProcessors[A.JOIN]=function(e){return new W(e.getValue(i.KEY_NAME_FIELD),e.getValue(i.KEY_UUID_FIELD),e.getValueAsIntWithDefault(i.KEY_PLATFORM_ID,0),parseFloat(e.getValue(i.KEY_VER_FIELD))/100)},this.incomingTagValMsgProcessors[A.CHANGE_INT_FIELD]=function(e){return function(e){var t=e.getValueAsInt(i.KEY_CHANGE_TYPE),n=e.getValueWithDefault("",i.KEY_CORRELATION_FIELD),a="";if(t===_.ABSOLUTE_LIST){ee(e.getValueAsIntWithDefault(i.KEY_NO_OF_CHOICES,0),e)}else a=e.getValueWithDefault(i.KEY_CURRENT_VAL,"");return new J(e.getValue(i.KEY_ID_FIELD),t,a,n)}(e)},this.incomingTagValMsgProcessors[A.PAIRING_REQUEST]=function(e){return new q(e.getValue(i.KEY_NAME_FIELD),e.getValue(i.KEY_UUID_FIELD))},this.incomingTagValMsgProcessors[A.SUBMENU_BOOT_ITEM]=function(t){return e.processSubMenuItem(t)},this.incomingTagValMsgProcessors[A.ANALOG_BOOT_ITEM]=function(t){return e.processAnalogItem(t)},this.incomingTagValMsgProcessors[A.BOOLEAN_BOOT_ITEM]=function(t){return e.processBooleanItem(t)},this.incomingTagValMsgProcessors[A.ACTION_BOOT_ITEM]=function(t){return e.processActionItem(t)},this.incomingTagValMsgProcessors[A.BOOT_RGB_COLOR]=function(t){return e.processRgbItem(t)},this.incomingTagValMsgProcessors[A.FLOAT_BOOT_ITEM]=function(t){return e.processFloatItem(t)},this.incomingTagValMsgProcessors[A.ENUM_BOOT_ITEM]=function(t){return e.processEnumItem(t)},this.incomingTagValMsgProcessors[A.LARGE_NUM_BOOT_ITEM]=function(t){return e.processLargeNumItem(t)},this.incomingTagValMsgProcessors[A.RUNTIME_LIST_BOOT]=function(t){return e.processListItem(t)},this.incomingTagValMsgProcessors[A.BOOT_SCROLL_CHOICE]=function(t){return e.processScrollChoiceItem(t)},this.incomingTagValMsgProcessors[A.TEXT_BOOT_ITEM]=function(t){return e.processTextItem(t)},this.outgoingTagValMsgProcessors[A.HEARTBEAT]=new Q(A.HEARTBEAT,(function(t){return e.buildHeartbeat(t)})),this.outgoingTagValMsgProcessors[A.JOIN]=new Q(A.JOIN,(function(t){return e.buildJoin(t)})),this.outgoingTagValMsgProcessors[A.PAIRING_REQUEST]=new Q(A.PAIRING_REQUEST,(function(t){return e.buildPairing(t)})),this.outgoingTagValMsgProcessors[A.DIALOG_UPDATE]=new Q(A.HEARTBEAT,(function(t){return e.buildDialogAction(t)})),this.outgoingTagValMsgProcessors[A.CHANGE_INT_FIELD]=new Q(A.CHANGE_INT_FIELD,(function(t){return e.buildUpdate(t)}))}},{key:"convertWireToCommand",value:function(e){if(e.length<3)throw new z(z.MSG_TOO_SMALL+e);var t=e.substr(0,2),n=e.substr(2),i=this.parsedKeyVal;i.startParseData(n);var a=this.incomingTagValMsgProcessors[t];if(a)return a(i)}},{key:"convertCommandToWire",value:function(e){if(!e)throw new z("Unexpected null message");var t=this.outgoingTagValMsgProcessors[e.commandType];return null===t||void 0===t?void 0:t.applyMsg(e)}},{key:"asTagVal",value:function(e,t){return e+"="+t+"|"}},{key:"startMessage",value:function(e){return String.fromCharCode(1)+String.fromCharCode(1)+e}},{key:"buildJoin",value:function(e){return this.startMessage(A.JOIN)+this.asTagVal(i.KEY_NAME_FIELD,e.name)+this.asTagVal(i.KEY_UUID_FIELD,e.uuid)+this.asTagVal(i.KEY_VER_FIELD,String(e.version))+this.asTagVal(i.KEY_PLATFORM_ID,e.platform.toString(10))+String.fromCharCode(2)}},{key:"buildPairing",value:function(e){return this.startMessage(A.PAIRING_REQUEST)+this.asTagVal(i.KEY_NAME_FIELD,e.appName)+this.asTagVal(i.KEY_UUID_FIELD,e.appUuid)+String.fromCharCode(2)}},{key:"buildUpdate",value:function(e){var t=this.startMessage(A.CHANGE_INT_FIELD)+this.asTagVal(i.KEY_CHANGE_TYPE,e.mode.toFixed(0))+this.asTagVal(i.KEY_ID_FIELD,e.menuId)+this.asTagVal(i.KEY_CORRELATION_FIELD,e.correlation);if(e.mode===_.ABSOLUTE_LIST){var n=e.value;this.asTagVal(i.KEY_NO_OF_CHOICES,n.length.toString(10));for(var a=0;a<n.length;a++){var s=String.fromCharCode(65+a);t+=this.asTagVal(i.KEY_PREPEND_NAMECHOICE+s,""),t+=this.asTagVal(i.KEY_PREPEND_CHOICE+s,n[a])}}else t+=this.asTagVal(i.KEY_CURRENT_VAL,e.value.toString());return t+=String.fromCharCode(2)}},{key:"buildDialogAction",value:function(e){return this.startMessage(A.DIALOG_UPDATE)+this.asTagVal(i.KEY_MODE_FIELD,e.mode)+this.asTagVal(i.KEY_HEADER_FIELD,e.header)+this.asTagVal(i.KEY_BUFFER_FIELD,e.buffer)+this.asTagVal(i.KEY_BUTTON1_FIELD,e.button1.toFixed(0))+this.asTagVal(i.KEY_BUTTON2_FIELD,e.button2.toFixed(0))+String.fromCharCode(2)}},{key:"buildHeartbeat",value:function(e){return this.startMessage(A.HEARTBEAT)+this.asTagVal(i.HB_MODE_FIELD,e.mode.toString(10))+this.asTagVal(i.HB_FREQUENCY_FIELD,e.frequency.toString(10))+String.fromCharCode(2)}},{key:"processMenuItem",value:function(e){var t=this.parsedKeyVal,n=t.getValue(i.KEY_PARENT_ID_FIELD),a=t.getValue(i.KEY_ID_FIELD),s=this.tree.getMenuItemFor(a);return s||(s=e(t,a),this.tree.addMenuItem(n,s)),s.setVisible(0!==t.getValueAsInt(i.KEY_VISIBLE_FIELD)),s.setReadOnly(0!==t.getValueAsInt(i.KEY_READONLY_FIELD)),s.setItemName(t.getValue(i.KEY_NAME_FIELD)),s}},{key:"processSubMenuItem",value:function(e){var t=this.processMenuItem((function(e,t){return new P(e.getValue(i.KEY_NAME_FIELD),t)}));return new X(A.SUBMENU_BOOT_ITEM,t,e.getValue(i.KEY_PARENT_ID_FIELD),!1)}},{key:"processActionItem",value:function(e){var t=this.processMenuItem((function(e,t){return new R(t)}));return new X(A.ACTION_BOOT_ITEM,t,e.getValue(i.KEY_PARENT_ID_FIELD),!1)}},{key:"processRgbItem",value:function(e){var t=this.processMenuItem((function(e,t){return new V(t)}));t.setAlphaChannelOn(0!==e.getValueAsInt(i.KEY_ALPHA_FIELD));var n=e.getValueWithDefault(i.KEY_CURRENT_VAL,"#ffffff");return t.setCurrentValue(n),new X(A.BOOT_RGB_COLOR,t,e.getValue(i.KEY_PARENT_ID_FIELD),n)}},{key:"processAnalogItem",value:function(e){var t=this.processMenuItem((function(e,t){return new j(t)}));t.setOffset(e.getValueAsInt(i.KEY_ANALOG_OFFSET_FIELD)),t.setDivisor(e.getValueAsInt(i.KEY_ANALOG_DIVISOR_FIELD)),t.setMaxValue(e.getValueAsInt(i.KEY_ANALOG_MAX_FIELD)),t.setUnitName(e.getValueWithDefault(i.KEY_ANALOG_UNIT_FIELD,""));var n=parseInt(e.getValue(i.KEY_CURRENT_VAL));return t.setCurrentValue(n),new X(A.ANALOG_BOOT_ITEM,t,e.getValue(i.KEY_PARENT_ID_FIELD),n)}},{key:"processBooleanItem",value:function(e){var t=this.processMenuItem((function(e,t){return new M(t)}));t.setNaming(e.getValueAsInt(i.KEY_BOOLEAN_NAMING));var n="1"===e.getValue(i.KEY_CURRENT_VAL);return t.setCurrentValue(n),new X(A.BOOLEAN_BOOT_ITEM,t,e.getValue(i.KEY_PARENT_ID_FIELD),n)}},{key:"processFloatItem",value:function(e){var t=this.processMenuItem((function(e,t){return new L(t)}));t.setDecimalPlaces(e.getValueAsInt(i.KEY_FLOAT_DECIMAL_PLACES));var n=parseFloat(e.getValue(i.KEY_CURRENT_VAL));return t.setCurrentValue(n),new X(A.FLOAT_BOOT_ITEM,t,e.getValue(i.KEY_PARENT_ID_FIELD),n)}},{key:"processScrollChoiceItem",value:function(e){var t=this.processMenuItem((function(e,t){return new x(t)}));t.setNumberOfEntries(e.getValueAsInt(i.KEY_NO_OF_CHOICES));var n=F.fromString(i.KEY_CURRENT_VAL);return t.setCurrentValue(n),new X(A.BOOT_SCROLL_CHOICE,t,e.getValue(i.KEY_PARENT_ID_FIELD),n)}},{key:"processTextItem",value:function(e){var t=this.processMenuItem((function(e,t){return new w(t)}));t.setTextLength(e.getValueAsInt(i.KEY_MAX_LENGTH)),t.setEditMode(e.getValueAsInt(i.KEY_EDIT_TYPE));var n=e.getValueWithDefault(i.KEY_CURRENT_VAL,"");return t.setCurrentValue(n),new X(A.TEXT_BOOT_ITEM,t,e.getValue(i.KEY_PARENT_ID_FIELD),n)}},{key:"processLargeNumItem",value:function(e){var t=this.processMenuItem((function(e,t){return new U(t)}));t.setDecimalPlaces(e.getValueAsInt(i.KEY_FLOAT_DECIMAL_PLACES)),t.setNegativeAllowed(e.getValueAsInt(i.KEY_NEGATIVE_ALLOWED)>0),t.setDigitsAllowed(e.getValueAsInt(i.KEY_MAX_LENGTH));var n=parseFloat(e.getValueWithDefault(i.KEY_CURRENT_VAL,"0"));return t.setCurrentValue(n),new X(A.LARGE_NUM_BOOT_ITEM,t,e.getValue(i.KEY_PARENT_ID_FIELD),n)}},{key:"processListItem",value:function(e){var t=this.processMenuItem((function(e,t){return new k(t)})),n=ee(e.getValueAsIntWithDefault(i.KEY_NO_OF_CHOICES,0),e);return t.setCurrentValue(n),new X(A.RUNTIME_LIST_BOOT,t,e.getValue(i.KEY_PARENT_ID_FIELD),n)}},{key:"processEnumItem",value:function(e){for(var t=this.processMenuItem((function(e,t){return new y(t)})),n=[],a=e.getValueAsInt(i.KEY_NO_OF_CHOICES),s=0;s<a;s++)n.push(e.getValueWithDefault("C"+String.fromCharCode(65+s),""));t.setItemList(n);var r=parseInt(e.getValue(i.KEY_CURRENT_VAL));return t.setCurrentValue(r),new X(A.ENUM_BOOT_ITEM,t,e.getValue(i.KEY_PARENT_ID_FIELD),r)}}]),e}();function ee(e,t){for(var n=Array(),a=0;a<e;a++){var s=String.fromCharCode(65+a),r=t.getValueWithDefault(i.KEY_PREPEND_NAMECHOICE+s,""),o=t.getValueWithDefault(i.KEY_PREPEND_CHOICE+s,"");n.push(r+" "+o)}return n}var te,ne=function(){function e(t){Object(c.a)(this,e),this.allItemMap={},this.rootElement=new P("ROOT","0"),this.treeStructureChanged=void 0,this.allItemMap[0]=this.rootElement,this.treeStructureChanged=t}return Object(u.a)(e,[{key:"getRoot",value:function(){return this.rootElement}},{key:"getMenuItemFor",value:function(e){return this.allItemMap[e]}},{key:"addMenuItem",value:function(e,t){if(this.getMenuItemFor(t.getMenuId()))return!1;var n=this.allItemMap[e];return n||(n=this.rootElement),n.addChildItem(t),this.allItemMap[t.getMenuId()]=t,this.treeStructureChanged(this,t.getMenuId()),!0}},{key:"emptyTree",value:function(){this.allItemMap={},this.rootElement.clearAll(),this.allItemMap[0]=this.rootElement,this.treeStructureChanged(this,this.rootElement.getMenuId())}}]),e}(),ie=0;function ae(){return Math.floor(1048575*Math.random()+ ++ie)}function se(e){switch(e){case te.CONNECTED:return"Connected";case te.BOOTSTRAP:return"Receiving Items";case te.READY:return"Ready";case te.FAILED_AUTHENTICATION:return"Not Authorized";case te.PAIRED_OK:return"Paired";case te.STOPPED:case te.NOT_CONNECTED:return"Not Connected"}}!function(e){e[e.STOPPED=0]="STOPPED",e[e.NOT_CONNECTED=1]="NOT_CONNECTED",e[e.CONNECTED=2]="CONNECTED",e[e.BOOTSTRAP=3]="BOOTSTRAP",e[e.READY=4]="READY",e[e.FAILED_AUTHENTICATION=5]="FAILED_AUTHENTICATION",e[e.PAIRED_OK=6]="PAIRED_OK"}(te||(te={}));var re=function(){function e(t,n){var i=this;Object(c.a)(this,e),this.menuTree=void 0,this.protocolHandler=void 0,this.appInfo=void 0,this.componentsById={},this.lastHeartbeatRx=void 0,this.lastHeartbeatTx=void 0,this.hbFrequency=1500,this.currentConnection="",this.appName="",this.appVersion=0,this.appPlatform=I.JS_API,this.connector=void 0,this.dialogListener=void 0,this.currentState=te.STOPPED,this.stateListener=void 0,this.pairingMode=!1,this.customMessageHandler=void 0,this.appInfo=n,this.menuTree=new ne((function(e,t){return i.rebuildTree(!1)})),this.lastHeartbeatRx=this.lastHeartbeatTx=Date.now(),this.connector=t,this.protocolHandler=new $(this.menuTree),this.customMessageHandler=function(e){return console.warn("unhandled message on ".concat(i.connector.getName()," - ").concat(e))}}return Object(u.a)(e,[{key:"setCurrentState",value:function(e){this.currentState=e,this.stateListener&&this.stateListener(e)}},{key:"getCurrentState",value:function(){return this.currentState}},{key:"registerStateListener",value:function(e){this.stateListener=e,e(this.currentState)}},{key:"isRunning",value:function(){return this.currentState!==te.STOPPED&&this.currentState!==te.FAILED_AUTHENTICATION}},{key:"start",value:function(){var e=this;this.isRunning()||(this.connector.registerMessageHandler((function(t,n){return e.messageProcessor(n)})),this.setCurrentState(te.NOT_CONNECTED),this.connector.registerConnectionListener((function(t,n){t?(e.setCurrentState(te.CONNECTED),e.lastHeartbeatRx=e.lastHeartbeatTx=Date.now(),e.sendMessage(e.protocolHandler.convertCommandToWire(new B(e.hbFrequency,p.START))),e.pairingMode?e.sendMessage(e.protocolHandler.convertCommandToWire(new q(e.appInfo.getAppName(),e.appInfo.getAppUuid()))):e.sendMessage(e.protocolHandler.convertCommandToWire(new W(e.appInfo.getAppName(),e.appInfo.getAppUuid(),I.JS_API,function(){var e="0.3.1";if(!e)return 0;var t=/(\d+)\.(\d+).*/,n=e.match(t);if(n&&n.length>1)return 100*parseInt(n[0])+parseInt(n[1]);return 0}()))),e.menuTree.emptyTree(),e.rebuildTree(!1)):(e.setCurrentState(te.NOT_CONNECTED),e.menuTree.emptyTree(),e.rebuildTree(!0))})),this.checkHeartbeats(),this.tickAllElements(),this.connector.start())}},{key:"attemptPairing",value:function(){var e=Object(f.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.stop(),this.pairingMode=!0,this.start(),n=Date.now(),e.prev=4;case 5:if(!(Date.now()-n<6e4)){e.next=15;break}if(this.currentState!==te.FAILED_AUTHENTICATION){e.next=8;break}return e.abrupt("return",!1);case 8:if(this.currentState!==te.PAIRED_OK){e.next=10;break}return e.abrupt("return",!0);case 10:return t(se(this.currentState)),e.next=13,oe(500);case 13:e.next=5;break;case 15:return e.prev=15,this.stop(),this.pairingMode=!1,e.finish(15);case 19:return e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e,this,[[4,,15,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e;this.pairingMode=!1,this.setCurrentState(te.STOPPED),null===(e=this.connector)||void 0===e||e.closeConnection(),this.menuTree.emptyTree(),this.componentsById={}}},{key:"tickAllElements",value:function(){if(this.connector.isConnected()){var e=Date.now();Object.values(this.componentsById).forEach((function(t){return t.tick(e)}))}setTimeout(this.tickAllElements.bind(this),this.connector.isConnected()?100:1e3)}},{key:"checkHeartbeats",value:function(){var e=this,t=Date.now();this.connector.isConnected()&&t-this.lastHeartbeatRx>3*this.hbFrequency&&(console.error("Connecting closing due to inactivity"+this.connector.getName()),this.connector.closeConnection()),this.connector.isConnected()&&t-this.lastHeartbeatTx>this.hbFrequency&&this.sendMessage(this.protocolHandler.convertCommandToWire(new B(this.hbFrequency,p.NORMAL))),!this.connector.isConnected()&&t-this.connector.lastDisconnectTime()>(this.pairingMode?4e3:8e3)&&this.connector.start(),this.isRunning()&&setTimeout((function(){return e.checkHeartbeats()}),500)}},{key:"getTree",value:function(){return this.menuTree}},{key:"getMenuName",value:function(){return this.connector.isConnected()?this.appName+", V"+this.appVersion+" "+function(e){switch(e){case I.ARDUINO:case I.ARDUINO_32:return"Arduino";case I.JAVA_API:return"Java/PI";case I.DNET_API:return".NET";case I.JS_API:return"JS"}}(this.appPlatform):"Lost connection"}},{key:"rebuildTree",value:function(e){if(e){console.info("Cleaning down components");var t=this.menuTree.getRoot().getMenuId(),n=this.componentsById[t];this.componentsById={},n&&(this.componentsById[t]=n)}this.currentState===te.READY&&Object.values(this.componentsById).forEach((function(e){return e.structureHasChanged()}))}},{key:"putMenuComponent",value:function(e,t){this.componentsById[e]=t}},{key:"sendActionableUpdate",value:function(e){try{var t=this.menuTree.getMenuItemFor(e);if(!t)return;var n=t instanceof M&&!t.getCurrentValue(),i=ae();return this.sendMessage(this.protocolHandler.convertCommandToWire(new J(t.getMenuId(),_.ABSOLUTE,n?"1":"0",i.toString(16)))),i}catch(a){console.error("Action update was not sent for ".concat(e)),this.connector.closeConnection()}}},{key:"sendListResponseUpdate",value:function(e,t,n){try{var i=ae(),a=t.toString()+":"+(n?"1":"0");return this.sendMessage(this.protocolHandler.convertCommandToWire(new J(e,_.LIST_SELECTION,a,i.toString(16)))),i}catch(s){console.error("List response was not sent for "+e+" row "+t),this.connector.closeConnection()}}},{key:"sendAbsoluteUpdate",value:function(e,t){try{var n=this.menuTree.getMenuItemFor(e),i=ae();return this.sendMessage(this.protocolHandler.convertCommandToWire(new J(n.getMenuId(),_.ABSOLUTE,t,i.toString(16)))),i}catch(a){console.error("Update was not sent for ".concat(e," change ").concat(t),a),this.connector.closeConnection()}}},{key:"sendDialogAction",value:function(e){try{var t=ae();return this.sendMessage(this.protocolHandler.convertCommandToWire(new G(v.ACTION,"","",e,e,t.toString(16)))),t}catch(n){console.error("Dialog action not sent for ".concat(e),n),this.connector.closeConnection()}}},{key:"sendDeltaUpdate",value:function(e,t){try{var n=ae(),i=this.menuTree.getMenuItemFor(e);if(i instanceof x){var a=i.getCurrentValue();return a.currentPos+=t,this.sendMessage(this.protocolHandler.convertCommandToWire(new J(i.getMenuId(),_.ABSOLUTE,a.asString(),n.toString(16)))),n}if(i instanceof j||i instanceof y)return this.sendMessage(this.protocolHandler.convertCommandToWire(new J(i.getMenuId(),_.DELTA,t.toFixed(0),n.toString(16)))),n}catch(s){console.error("Delta update was not sent for ".concat(e," change ").concat(t),s),this.connector.closeConnection()}}},{key:"messageProcessor",value:function(e){var t=this.protocolHandler.convertWireToCommand(e);if(t)switch(this.lastHeartbeatRx=Date.now(),t.commandType){case A.JOIN:this.joinReceived(t);break;case A.CHANGE_INT_FIELD:this.itemHasUpdated(t);break;case A.HEARTBEAT:this.heartbeatReceived(t);break;case A.PAIRING_REQUEST:this.pairingRequest(t);break;case A.DIALOG_UPDATE:this.dialogHasUpdated(t);break;case A.BOOTSTRAP:this.bootstrapEvent(t);break;case A.ACKNOWLEDGEMENT:this.acknowledgement(t);break;case A.BOOT_SCROLL_CHOICE:case A.BOOT_RGB_COLOR:case A.ENUM_BOOT_ITEM:case A.LARGE_NUM_BOOT_ITEM:case A.ANALOG_BOOT_ITEM:case A.BOOLEAN_BOOT_ITEM:case A.FLOAT_BOOT_ITEM:case A.RUNTIME_LIST_BOOT:case A.TEXT_BOOT_ITEM:case A.ACTION_BOOT_ITEM:case A.SUBMENU_BOOT_ITEM:console.info("Incoming boot command rx but already processed by protocol",t.commandType);break;default:this.customMessageHandler(t)}}},{key:"heartbeatReceived",value:function(e){this.hbFrequency=e.frequency,console.log("hbrx: "+e.mode+", freq: "+e.frequency)}},{key:"pairingRequest",value:function(e){console.log("Pair: "+e.appName+", uuid: "+e.appUuid)}},{key:"dialogHasUpdated",value:function(e){this.dialogListener&&this.dialogListener(e.mode===v.SHOW,e.header,e.buffer,e.button1,e.button2)}},{key:"joinReceived",value:function(e){this.currentConnection=e.name,this.appName=e.name,this.appVersion=e.version,this.appPlatform=e.platform,this.componentsById[0].structureHasChanged(),console.log("join: "+this.appName+", uuid: "+e.uuid+", platform: "+this.appPlatform+", ver: "+this.appVersion)}},{key:"bootstrapEvent",value:function(e){var t=e.bootstrapMode===T.START;this.setCurrentState(t?te.BOOTSTRAP:te.READY),t||this.rebuildTree(!1),console.debug("Boot event "+e.bootstrapMode)}},{key:"acknowledgement",value:function(e){console.debug("acknowledgement received "+e.correlation+" - "+e.status),e.correlation&&parseInt(e.correlation,16)>0?Object.values(this.componentsById).forEach((function(t){return t.ackReceived(parseInt(e.correlation,16),e.status)})):this.currentState===te.CONNECTED&&(e.status!==b.SUCCESS?this.setCurrentState(te.FAILED_AUTHENTICATION):this.pairingMode&&this.setCurrentState(te.PAIRED_OK))}},{key:"itemHasUpdated",value:function(e){var t,n=this.menuTree.getMenuItemFor(e.menuId);if(n){switch(n.messageType){case"Analog":case"Enum":n.setCurrentValue(parseInt(e.value.toString(),10));break;case"LargeNum":n.setCurrentValue(parseFloat(e.value.toString()));break;case"Boolean":n.setCurrentValue(parseInt(e.value.toString()));break;case"Scroll":n.setCurrentValue(F.fromString(e.value.toString()));break;case"List":n.setCurrentValue(e.value);break;default:n.setCurrentValue(e.value.toString())}null===(t=this.componentsById[e.menuId])||void 0===t||t.itemHasUpdated()}}},{key:"sendMessage",value:function(e){try{console.debug("Sending message to ".concat(this.connector.getName()," content: ").concat(function(e){for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);t+=i<31?"<"+i+">":e.charAt(n)}return t}(e))),this.connector.sendMessage(e),this.lastHeartbeatTx=Date.now()}catch(t){console.log("Exception caught during send: "+t),this.connector.closeConnection()}}},{key:"registerCustomMessageHandler",value:function(e){this.customMessageHandler=e}},{key:"registerDialogListener",value:function(e){this.dialogListener=e}}]),e}();function oe(e){return new Promise((function(t){return setTimeout(t,e)}))}var ce=n(8),ue=n(5);function le(e,t){if(e instanceof j){var n=parseFloat(t);if((n=Math.round(n*e.getDivisor()-e.getOffset()))<0||n>e.getMaxValue())throw new z("Number ".concat(n," outside of 0..").concat(e.getMaxValue()));return n.toFixed(0)}if(e instanceof y){var i=parseInt(t);if(i<0||i>=e.getItemList().length)throw new z("Enum ".concat(i," outside allowable range"));return e.getCurrentValue().toFixed(0)}if(e instanceof M)return function(e){return"Y"===e.charAt(0)||"1"===e.charAt(0)||"T"===e.charAt(0)}(t)?"1":"0";if(e instanceof U){var a=parseFloat(t);if(a<0&&!e.isNegativeAllowed())throw new z("Negative value not allowed");return a.toFixed(e.getDecimalPlaces())}if(e instanceof w)return function(e,t){if(e.getEditMode()===S.PLAIN_TEXT){if(t.length>e.getTextLength())throw new z("Text too long");return t}if(e.getEditMode()===S.IP_ADDRESS){if(!t.match("\\d+\\.\\d+\\.\\d+\\.\\d+"))throw new z("Not an IPV4 address");return t}if(e.getEditMode()===S.TIME_24H||e.getEditMode()===S.TIME_24_HUNDREDS||e.getEditMode()===S.TIME_12H){if(!t.match("\\d+:\\d+:\\d+(.\\d*)*"))throw new z("Not in the correct time format");return t}if(e.getEditMode()===S.GREGORIAN_DATE){if(!t.match("\\d+/\\d+/\\d+"))throw new z("Not a date");return t}return""}(e,t);if(e instanceof V){if(!t.match("#[0-9A-Fa-f]*"))throw new z("Not in HTML color format");return t}if(e instanceof x)return parseInt(t).toFixed(0)+"-";throw new z("Unknown type of item for text conversion")}function he(e){return e instanceof L?e.getCurrentValue().toFixed(e.getDecimalPlaces()):e instanceof j?function(e){var t=e.getCurrentValue()+e.getOffset(),n=e.getDivisor();if(n<2)return t.toFixed(0);var i=Math.floor(t/n),a=function(e){return e<2?1:e>1e3?1e4:e>100?1e3:e>10?100:10}(e.getDivisor()),s=(Math.abs(t%n)*(a/n)).toFixed(0);return i.toFixed(0)+"."+s.padStart(function(e){return e<=10?1:e<=100?2:e<=1e3?3:4}(n),"0")+e.getUnitName()}(e):e instanceof y?e.getItemList()[e.getCurrentValue()]:e instanceof M?function(e){var t=e.getCurrentValue();switch(e.getNaming()){case N.YES_NO:return t?"YES":"NO";case N.ON_OFF:return t?"ON":"OFF";default:return t?"TRUE":"FALSE"}}(e):e instanceof w?e.getCurrentValue():e instanceof U?e.getCurrentValue().toFixed(e.getDecimalPlaces()):e instanceof V?e.getCurrentValue():e instanceof x?e.getCurrentValue().currentValue:e instanceof k?Object.values(e.getCurrentValue()).join(", "):""}var de,Ee=n.p+"static/media/pairing.63065c5a.webp",ge=n(0);!function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.STARTED=1]="STARTED",e[e.DONE=2]="DONE"}(de||(de={}));var Oe,fe=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).state={buttonText:"Start pairing with device",pairingMode:de.NOT_STARTED},i.pairingButtonClicked=i.pairingButtonClicked.bind(Object(l.a)(i)),i}return Object(u.a)(n,[{key:"pairingButtonClicked",value:function(){var e=Object(f.a)(O.a.mark((function e(){var t=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.pairingMode!==de.NOT_STARTED){e.next=7;break}return e.next=3,this.props.controller.attemptPairing((function(e){t.setState({buttonText:e,pairingMode:de.STARTED})}));case 3:e.sent?this.setState({buttonText:"Successfully paired, close",pairingMode:de.DONE}):this.setState({buttonText:"Failed, try pairing again",pairingMode:de.NOT_STARTED}),e.next=8;break;case 7:this.state.pairingMode===de.STARTED?this.props.controller.stop():window.location.reload();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(ge.jsxs)("div",{children:[Object(ge.jsx)("h2",{children:"Device requires pairing"}),Object(ge.jsx)("img",{src:Ee,className:"pairing-image",alt:"Example pairing screen on device"}),Object(ge.jsx)("p",{children:"This device only allows authorized connections, you need to pair with the device in order to monitor and control it. Make sure that the device is within reach as you will need to press 'Accept' on the device itself."}),Object(ge.jsx)("p",{children:"An example of how the pairing screen will look is presented above, pressing accept gives this connection complete control of the device. Ensure you only ever press accept when you are pairing yourself."}),Object(ge.jsx)("div",{children:Object(ge.jsx)("button",{className:"settingsButton",onClick:this.pairingButtonClicked,children:this.state.buttonText})})]})}}]),n}(a.Component);!function(e){e[e.READY=0]="READY",e[e.PENDING_UPDATE=1]="PENDING_UPDATE",e[e.RECENT_UPDATE=2]="RECENT_UPDATE",e[e.UPDATE_ERROR=3]="UPDATE_ERROR"}(Oe||(Oe={}));var pe,Te=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).itemName="",i.itemId="",i.readOnly=!1,i.lastUpdate=Date.now(),i.itemState=Oe.READY,i.outstandingCorrelation=0,i.bindAllControls(),i}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.updateItem()}},{key:"updateItem",value:function(){var e=this.props.controller.getTree().getMenuItemFor(this.props.itemId);e&&(this.props.controller.putMenuComponent(e.getMenuId(),this),this.itemState===Oe.READY&&(this.itemState=Oe.RECENT_UPDATE),this.lastUpdate=Date.now(),this.internalUpdateItem(e))}},{key:"ackReceived",value:function(e,t){e===this.outstandingCorrelation&&(this.outstandingCorrelation=0,this.itemState=t>0?Oe.UPDATE_ERROR:Oe.RECENT_UPDATE,this.forceUpdate())}},{key:"tick",value:function(e){var t=e-this.lastUpdate;this.itemState===Oe.PENDING_UPDATE?t>3e3&&(this.itemState=Oe.UPDATE_ERROR,this.outstandingCorrelation=0,this.lastUpdate=Date.now(),this.forceUpdate()):this.itemState!==Oe.READY&&t>1e3&&(this.itemState=Oe.READY,this.forceUpdate())}},{key:"calculatedClass",value:function(e){switch(this.itemState){case Oe.PENDING_UPDATE:return e+" pendingUpdate";case Oe.RECENT_UPDATE:return e+" itemHasUpdated";case Oe.UPDATE_ERROR:return e+" errorDuringUpdate";default:return e}}},{key:"internalUpdateItem",value:function(e){"0"===e.getMenuId()?this.itemName=this.props.controller.getMenuName():this.itemName=e.getItemName(),this.itemId=e.getMenuId(),this.readOnly=e.isReadOnly()||e instanceof L}},{key:"bindAllControls",value:function(){}},{key:"structureHasChanged",value:function(){this.updateItem(),this.forceUpdate()}},{key:"itemHasUpdated",value:function(){this.updateItem(),this.forceUpdate()}},{key:"markRecentlyUpdated",value:function(e){this.lastUpdate=Date.now(),e?(this.itemState=Oe.PENDING_UPDATE,this.outstandingCorrelation=e):(this.itemState=Oe.UPDATE_ERROR,this.outstandingCorrelation=0),this.forceUpdate()}}]),n}(a.Component),_e=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(c.a)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).renderableChildren=[],e.isExpanded=!0,e}return Object(u.a)(n,[{key:"internalUpdateItem",value:function(e){Object(ce.a)(Object(ue.a)(n.prototype),"internalUpdateItem",this).call(this,e),this.renderableChildren=e.getChildren(),this.setState({value:""})}},{key:"bindAllControls",value:function(){this.toggleExpand=this.toggleExpand.bind(this)}},{key:"toggleExpand",value:function(){this.isExpanded=!this.isExpanded,this.forceUpdate()}},{key:"render",value:function(){var e=this,t=this.renderableChildren.filter((function(e){return e.isVisible()})).map((function(t){switch(t.messageType){case"Sub":return Object(ge.jsx)(n,{controller:e.props.controller,itemId:t.getMenuId()});case"Boolean":case"Action":return Object(ge.jsx)(Ne,{itemId:t.getMenuId(),controller:e.props.controller});case"Analog":case"Enum":case"Scroll":return Object(ge.jsx)(ve,{controller:e.props.controller,itemId:t.getMenuId()});case"Rgb32":return Object(ge.jsx)(Ce,{itemId:t.getMenuId(),controller:e.props.controller});case"List":return Object(ge.jsx)(Ae,{itemId:t.getMenuId(),controller:e.props.controller});default:return Object(ge.jsx)(Ie,{controller:e.props.controller,itemId:t.getMenuId()})}}));return Object(ge.jsx)("div",{children:Object(ge.jsxs)("div",{className:"subMenu",children:[Object(ge.jsxs)("h3",{children:[Object(ge.jsx)("button",{onClick:this.toggleExpand,children:this.isExpanded?"-":"+"}),this.itemName]}),Object(ge.jsx)("div",{className:this.isExpanded?"subShown":"subHidden",children:t})]})})}}]),n}(Te),me=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(c.a)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).pairingMode=!1,e}return Object(u.a)(n,[{key:"bindAllControls",value:function(){var e=this;this.props.controller.registerStateListener((function(t){t===te.FAILED_AUTHENTICATION&&(e.pairingMode=!0),e.itemHasUpdated()}))}},{key:"render",value:function(){return this.pairingMode?Object(ge.jsx)(fe,{controller:this.props.controller}):Object(ce.a)(Object(ue.a)(n.prototype),"render",this).call(this)}}]),n}(_e),ve=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"internalUpdateItem",value:function(e){Object(ce.a)(Object(ue.a)(n.prototype),"internalUpdateItem",this).call(this,e),this.setState({value:he(e)})}},{key:"bindAllControls",value:function(){this.sendDecrease=this.sendDecrease.bind(this),this.sendIncrease=this.sendIncrease.bind(this)}},{key:"sendDecrease",value:function(){var e,t=null===(e=this.props.controller)||void 0===e?void 0:e.sendDeltaUpdate(this.props.itemId,-1);this.markRecentlyUpdated(t)}},{key:"sendIncrease",value:function(){var e,t=null===(e=this.props.controller)||void 0===e?void 0:e.sendDeltaUpdate(this.props.itemId,1);this.markRecentlyUpdated(t)}},{key:"render",value:function(){var e;return Object(ge.jsxs)("div",{className:this.calculatedClass("upDownControl"),children:[Object(ge.jsx)("button",{className:"leftBtn",disabled:this.readOnly,onClick:this.sendDecrease,children:"<"}),Object(ge.jsx)("button",{className:"rightBtn",disabled:this.readOnly,onClick:this.sendIncrease,children:">"}),Object(ge.jsxs)("span",{children:[this.itemName,": ",null===(e=this.state)||void 0===e?void 0:e.value]})]})}}]),n}(Te),Ie=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(c.a)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).editingMode=!1,e.rollbackValue="",e}return Object(u.a)(n,[{key:"bindAllControls",value:function(){this.startEditing=this.startEditing.bind(this),this.cancelPressed=this.cancelPressed.bind(this),this.submitPressed=this.submitPressed.bind(this),this.textHasChanged=this.textHasChanged.bind(this)}},{key:"startEditing",value:function(){this.editingMode=!0,this.itemHasUpdated(),this.rollbackValue=this.state.value}},{key:"cancelPressed",value:function(){this.editingMode=!1,this.setState({value:this.rollbackValue}),this.itemHasUpdated()}},{key:"submitPressed",value:function(){try{this.editingMode=!1;var e=this.props.controller.getTree().getMenuItemFor(this.props.itemId),t=this.props.controller.sendAbsoluteUpdate(this.props.itemId,le(e,this.state.value));this.markRecentlyUpdated(t)}catch(n){alert("Problem submitting value: "+n),console.error("Problem during submit of value"),console.error(n)}}},{key:"textHasChanged",value:function(e){this.setState({value:e.currentTarget.value})}},{key:"internalUpdateItem",value:function(e){Object(ce.a)(Object(ue.a)(n.prototype),"internalUpdateItem",this).call(this,e),this.setState({value:he(e)})}},{key:"render",value:function(){var e,t;return this.editingMode?Object(ge.jsxs)("div",{className:"upDownControl",children:[Object(ge.jsx)("button",{className:"rightBtn",disabled:this.readOnly,onClick:this.submitPressed,children:"Submit"}),Object(ge.jsx)("button",{className:"rightBtn",onClick:this.cancelPressed,children:"Cancel"}),Object(ge.jsx)("form",{children:Object(ge.jsxs)("label",{children:[this.itemName,Object(ge.jsx)("input",{type:"text",value:null===(e=this.state)||void 0===e?void 0:e.value,onChange:this.textHasChanged})]})})]}):Object(ge.jsxs)("div",{className:this.calculatedClass("upDownControl"),children:[Object(ge.jsx)("button",{className:"rightBtn",onClick:this.startEditing,children:"Edit"}),Object(ge.jsxs)("div",{children:[this.itemName,": ",null===(t=this.state)||void 0===t?void 0:t.value]})]})}}]),n}(Te),be=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return Object(ge.jsx)("button",{className:"listElementButton",onClick:function(t){return e.props.controller.sendListResponseUpdate(e.props.itemId,e.props.row,t.detail>1)},children:this.props.text})}}]),n}(a.Component),Ae=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(c.a)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).itemList=Array(),e}return Object(u.a)(n,[{key:"internalUpdateItem",value:function(e){Object(ce.a)(Object(ue.a)(n.prototype),"internalUpdateItem",this).call(this,e),this.setState({value:""}),e instanceof k&&(this.itemList=e.getCurrentValue()),this.forceUpdate()}},{key:"render",value:function(){var e=this,t=0,n=this.itemList.map((function(n){return Object(ge.jsx)(be,{itemId:e.itemId,controller:e.props.controller,row:t++,text:n})}));return Object(ge.jsxs)("div",{className:this.calculatedClass("upDownControl"),children:[Object(ge.jsx)("p",{children:this.itemName}),Object(ge.jsx)("ul",{children:n})]})}}]),n}(Te),Ne=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"bindAllControls",value:function(){this.buttonPressed=this.buttonPressed.bind(this)}},{key:"internalUpdateItem",value:function(e){Object(ce.a)(Object(ue.a)(n.prototype),"internalUpdateItem",this).call(this,e);var t="Action"!==e.messageType?": "+he(e):"";this.setState({value:t})}},{key:"buttonPressed",value:function(){var e=this.props.controller.sendActionableUpdate(this.props.itemId);this.markRecentlyUpdated(e)}},{key:"render",value:function(){var e;return Object(ge.jsxs)("button",{disabled:this.readOnly,className:this.calculatedClass("actionableItem"),onClick:this.buttonPressed,children:[this.itemName,null===(e=this.state)||void 0===e?void 0:e.value]})}}]),n}(Te),Ce=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(c.a)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).editingStarted=!1,e}return Object(u.a)(n,[{key:"bindAllControls",value:function(){this.editingRequested=this.editingRequested.bind(this),this.submitPressed=this.submitPressed.bind(this),this.colorHasChanged=this.colorHasChanged.bind(this)}},{key:"internalUpdateItem",value:function(e){Object(ce.a)(Object(ue.a)(n.prototype),"internalUpdateItem",this).call(this,e),this.setState({value:e.getCurrentValue()})}},{key:"editingRequested",value:function(){this.editingStarted=!0,this.itemHasUpdated()}},{key:"colorHasChanged",value:function(e){this.setState({value:e.currentTarget.value})}},{key:"submitPressed",value:function(){try{this.editingStarted=!1;var e=this.props.controller.getTree().getMenuItemFor(this.props.itemId),t=this.props.controller.sendAbsoluteUpdate(this.props.itemId,le(e,this.state.value));this.markRecentlyUpdated(t)}catch(n){alert("Problem submitting value: "+n),console.error("Problem during submit of value"),console.error(n)}}},{key:"render",value:function(){var e,t,n,i={backgroundColor:null===(e=this.state)||void 0===e?void 0:e.value};return this.editingStarted?Object(ge.jsxs)("div",{className:"upDownControl colorControl",style:i,children:[Object(ge.jsx)("button",{className:"rightBtn",onClick:this.submitPressed,children:"Submit"}),Object(ge.jsxs)("form",{children:[Object(ge.jsx)("label",{children:"Select color:"}),Object(ge.jsx)("input",{type:"color",value:null===(t=this.state)||void 0===t?void 0:t.value,onChange:this.colorHasChanged})]})]}):Object(ge.jsxs)("div",{className:this.calculatedClass("upDownControl colorControl"),style:i,children:[Object(ge.jsx)("button",{disabled:this.readOnly,className:"rightBtn",onClick:this.editingRequested,children:"Change"}),Object(ge.jsx)("div",{children:null===(n=this.state)||void 0===n?void 0:n.value})]})}}]),n}(Te);!function(e){e[e.DISCONNECTED=0]="DISCONNECTED",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED",e[e.STOPPED=3]="STOPPED"}(pe||(pe={}));var De=function(){function e(t){Object(c.a)(this,e),this.url=void 0,this.connectionListener=void 0,this.messageHandler=void 0,this.socket=void 0,this.state=pe.DISCONNECTED,this.lastDisconnect=0,this.currentData="",this.url=t}return Object(u.a)(e,[{key:"start",value:function(){var e=this;this.state!==pe.CONNECTING&&(console.info("Start connection to ".concat(this.getName())),this.state=pe.CONNECTING,this.socket=new WebSocket(this.url),this.lastDisconnect=0,this.socket.onclose=function(t){console.info("Connection reported onClose ".concat(e.getName())),e.connectionListener&&e.connectionListener(!1,t.reason+" - "+t.code),e.lastDisconnect=Date.now(),e.state=pe.DISCONNECTED,e.socket=void 0,e.currentData=""},this.socket.onopen=function(t){console.info("Connection reports onOpen ".concat(e.getName())),e.state=pe.CONNECTED,e.connectionListener&&e.connectionListener(!0,"")},this.socket.onmessage=function(t){e.currentData+=t.data;for(var n=e.getPossibleMessage(1);n&&e.messageHandler;){try{console.debug("Message received on ".concat(e.getName()," was ").concat(n)),e.messageHandler(1,n)}catch(i){console.log("Unexpected error in message processing"),console.log(i)}n=e.getPossibleMessage(1)}})}},{key:"lastDisconnectTime",value:function(){return this.lastDisconnect}},{key:"getPossibleMessage",value:function(e){if(this.state===pe.CONNECTED&&this.currentData){for(var t=0;t<this.currentData.length&&1!==this.currentData.charCodeAt(t);)t++;if(!(++t>=this.currentData.length||this.currentData.charCodeAt(t)!==e)){for(var n=t+1;t<this.currentData.length&&2!==this.currentData.charCodeAt(t);)t++;if(2===this.currentData.charCodeAt(t)){var i=this.currentData.substring(n,t);return this.currentData=this.currentData.substring(t+1),i}}}}},{key:"stop",value:function(){var e;this.state=pe.STOPPED,null===(e=this.socket)||void 0===e||e.close()}},{key:"closeConnection",value:function(){var e;console.info("closeConnection on ".concat(this.getName())),this.state=pe.DISCONNECTED,null===(e=this.socket)||void 0===e||e.close()}},{key:"getName",value:function(){return"WebSocket(".concat(this.url,")")}},{key:"isConnected",value:function(){var e;return(null===(e=this.socket)||void 0===e?void 0:e.readyState)===WebSocket.OPEN}},{key:"registerConnectionListener",value:function(e){var t;this.connectionListener=e,e((null===(t=this.socket)||void 0===t?void 0:t.readyState)===WebSocket.OPEN,"")}},{key:"registerMessageHandler",value:function(e){this.messageHandler=e}},{key:"sendMessage",value:function(e){var t;null===(t=this.socket)||void 0===t||t.send(e)}}]),e}(),je=n(26),ye=function(){function e(){var t,n,i;(Object(c.a)(this,e),this.SETTINGS_APP_NAME="settings_appName",this.SETTINGS_APP_UUID="settings_appUUID",this.SETTINGS_WEBSOCKET_EXT="settings_webSocketExt",this.uuid=Object(je.a)(),this.appName="Untitled",this.webSocketExtension="",Le(this.SETTINGS_APP_NAME)&&Le(this.SETTINGS_APP_UUID))?(this.appName=null!==(t=Me(this.SETTINGS_APP_NAME))&&void 0!==t?t:"Undefined",this.uuid=null!==(n=Me(this.SETTINGS_APP_UUID))&&void 0!==n?n:"Undefined",this.webSocketExtension=null!==(i=Me(this.SETTINGS_WEBSOCKET_EXT))&&void 0!==i?i:""):(Se(this.SETTINGS_APP_UUID,this.uuid),Se(this.SETTINGS_APP_NAME,this.appName),Se(this.SETTINGS_WEBSOCKET_EXT,this.webSocketExtension),Se("settings_appName","Untitled"))}return Object(u.a)(e,[{key:"getAppName",value:function(){return this.appName}},{key:"getAppUuid",value:function(){return this.uuid}},{key:"getWebSocketExtension",value:function(){return this.webSocketExtension}},{key:"setAppName",value:function(e){this.appName=e,Se(this.SETTINGS_APP_NAME,e)}},{key:"setAppUuid",value:function(e){this.uuid=e,Se(this.SETTINGS_APP_UUID,e)}},{key:"setWebSocketExtension",value:function(e){this.webSocketExtension=e,Se(this.SETTINGS_WEBSOCKET_EXT,e)}}]),e}(),ke=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).appNameHasChanged=i.appNameHasChanged.bind(Object(l.a)(i)),i.appUuidHasChanged=i.appUuidHasChanged.bind(Object(l.a)(i)),i.webSocketHasChanged=i.webSocketHasChanged.bind(Object(l.a)(i)),i.formSubmitPrevention=i.formSubmitPrevention.bind(Object(l.a)(i)),i}return Object(u.a)(n,[{key:"appNameHasChanged",value:function(e){this.props.settings.setAppName(e.currentTarget.value),this.forceUpdate()}},{key:"appUuidHasChanged",value:function(){this.props.settings.setAppUuid(Object(je.a)()),this.forceUpdate()}},{key:"webSocketHasChanged",value:function(e){this.props.settings.setWebSocketExtension(e.currentTarget.value),this.forceUpdate()}},{key:"formSubmitPrevention",value:function(e){e.preventDefault()}},{key:"render",value:function(){return Object(ge.jsxs)("div",{children:[Object(ge.jsx)("h1",{children:"Global Settings"}),Object(ge.jsxs)("form",{className:"settingsForm",onSubmit:this.formSubmitPrevention,children:[Object(ge.jsx)("label",{htmlFor:"appNameField",children:"App Name"}),Object(ge.jsx)("span",{children:Object(ge.jsx)("input",{id:"appNameField=",name:"appName",onChange:this.appNameHasChanged,value:this.props.settings.getAppName()})}),Object(ge.jsx)("label",{htmlFor:"appUuidField",children:"App UUID"}),Object(ge.jsx)("button",{onClick:this.appUuidHasChanged,children:Object(ge.jsx)("i",{className:"fa fa-refresh"})}),Object(ge.jsx)("span",{children:Object(ge.jsx)("input",{type:"text",id:"appUuidField",readOnly:!0,name:"appUuid",value:this.props.settings.getAppUuid()})}),Object(ge.jsx)("h2",{children:"Advanced / Dev settings"}),Object(ge.jsx)("label",{htmlFor:"websocketAddressField",children:"Web Socket"}),Object(ge.jsx)("span",{children:Object(ge.jsx)("input",{id:"websocketAddressField",name:"webSockField",onChange:this.webSocketHasChanged,value:this.props.settings.getWebSocketExtension()})})]}),Object(ge.jsxs)("p",{children:["embedcontrol"," Version ","0.3.1"]})]})}}]),n}(a.Component);function Se(e,t){var n=new Date;n.setTime(n.getTime()+31536e6),document.cookie=e+"="+t+";path=/;expires="+n.toUTCString()}function Me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=e.length+1;return document.cookie.split(";").map((function(e){return e.trim()})).filter((function(t){return t.substring(0,n)==="".concat(e,"=")})).map((function(e){return decodeURIComponent(e.substring(n))}))[0]||t}function Le(e){return void 0!==Me(e)}var Re=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var i;Object(c.a)(this,n),(i=t.call(this,e)).state={settingsActive:!1},i.settingsButtonWasPressed=i.settingsButtonWasPressed.bind(Object(l.a)(i));try{if(!n.hasStartedYet){n.hasStartedYet=!0;var a=n.globalSettings.getWebSocketExtension();n.globalSocket=new De(a.length?a:"ws://"+window.location.host+"/ws"),n.globalController=new re(n.globalSocket,n.globalSettings),n.globalController.start()}}catch(s){s instanceof Error&&console.log(s.message),console.log(s)}return i}return Object(u.a)(n,[{key:"settingsButtonWasPressed",value:function(){var e=!this.state.settingsActive;this.setState({settingsActive:e})}},{key:"render",value:function(){return this.state&&this.state.settingsActive?Object(ge.jsxs)("div",{className:"App",children:[Object(ge.jsxs)("header",{className:"App-header",children:[Object(ge.jsxs)("button",{onClick:this.settingsButtonWasPressed,className:"settingsButton",children:[Object(ge.jsx)("i",{className:"fa fa-close"})," "]}),Object(ge.jsx)("img",{src:E,className:"App-logo",alt:"logo"}),Object(ge.jsx)("p",{children:"App Settings"})]}),Object(ge.jsx)(ke,{settings:n.globalSettings,controller:n.globalController})]}):Object(ge.jsxs)("div",{className:"App",children:[Object(ge.jsxs)("header",{className:"App-header",children:[Object(ge.jsx)("button",{onClick:this.settingsButtonWasPressed,className:"settingsButton",children:Object(ge.jsx)("i",{className:"fa fa-cog"})}),Object(ge.jsx)("img",{src:E,className:"App-logo",alt:"logo"}),Object(ge.jsxs)("p",{children:["embedCONTROL ","0.3.1"]})]}),Object(ge.jsx)(Pe,{controller:n.globalController}),Object(ge.jsx)(me,{itemId:"0",controller:n.globalController})]})}}]),n}(a.Component);Re.globalSettings=new ye,Re.globalController=void 0,Re.globalSocket=void 0,Re.hasStartedYet=!1;var Pe=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(c.a)(this,n),i=t.call(this,e),e.controller.registerDialogListener((function(e,t,n,a,s){i.setState({title:t,content:n,button1:a,button2:s,shown:e})})),i.button1Clicked=i.button1Clicked.bind(Object(l.a)(i)),i.button2Clicked=i.button2Clicked.bind(Object(l.a)(i)),i}return Object(u.a)(n,[{key:"textFromBtnType",value:function(e){switch(e){case m.ACCEPT:return"Accept";case m.CANCEL:return"Cancel";case m.OK:return"OK";case m.CLOSE:return"Close";default:return""}}},{key:"button1Clicked",value:function(){this.props.controller.sendDialogAction(this.state.button1)}},{key:"button2Clicked",value:function(){this.props.controller.sendDialogAction(this.state.button2)}},{key:"render",value:function(){var e,t=(null===(e=this.state)||void 0===e?void 0:e.shown)?"dialogShown":"dialogHidden";return this.state?Object(ge.jsxs)("div",{className:t,children:[Object(ge.jsx)("h1",{children:this.state.title}),Object(ge.jsx)("h3",{children:this.state.content}),Object(ge.jsxs)("div",{children:[Object(ge.jsx)("button",{onClick:this.button1Clicked,children:this.textFromBtnType(this.state.button1)}),Object(ge.jsx)("button",{onClick:this.button2Clicked,children:this.textFromBtnType(this.state.button2)})]})]}):Object(ge.jsx)("div",{})}}]),n}(a.Component),Ue=Re,Ve=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,27)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),i(e),a(e),s(e),r(e)}))};o.a.render(Object(ge.jsx)(s.a.StrictMode,{children:Object(ge.jsx)(Ue,{})}),document.getElementById("root")),Ve()}},[[24,1,2]]]);
//# sourceMappingURL=main.40e3e89d.chunk.js.map